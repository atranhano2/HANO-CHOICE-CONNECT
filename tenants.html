<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Tenant portal ‚Ä¢ Housing Choice Connect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet/dist/leaflet.css"
    />
  </head>
  <body>
    <header class="civic-header">
      <div class="utility-bar">
        <div class="utility-left">
          <span>üìû Housing Assistance Hotline: (504) 555‚Äë1212</span>
        </div>
        <div class="utility-right">
          <a href="#">Espa√±ol</a>
          <a href="#">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a>
          <a href="#">ÁπÅÈ´î‰∏≠Êñá</a>
        </div>
      </div>

      <nav class="civic-nav">
        <div class="nav-brand">
          <img
            src="assets/img/housing-logo.png"
            alt="Agency Logo"
            class="agency-logo"
          />
          <div class="agency-title">
            Housing Choice Connect<br />
            <span class="agency-subtitle">A Service of the Housing Authority</span>
          </div>
        </div>

        <div class="nav-links">
          <a href="index.html">Home</a>
          <a href="tenants.html">Tenants</a>
          <a href="landlords.html">Landlords</a>
          <a href="#">Programs</a>
          <a href="#">Resources</a>
        </div>

        <div class="nav-cta">
          <button id="logoutBtn" class="btn btn-outline">Sign out</button>
        </div>
      </nav>
    </header>

    <main>
      <section class="section">
        <div class="section-header">
          <div>
            <div class="section-title">Tenant portal</div>
            <div class="section-subtitle">
              Browse properties listed by participating Landlords. All listings are
              tied to Landlord Entity IDs.
            </div>
          </div>
        </div>

        <div class="card" style="margin-bottom:1.5rem;">
          <h3 style="margin-bottom:0.75rem;">Filter listings</h3>

          <div class="form-row">
            <div class="form-group">
              <label>Min price ($)</label>
              <input id="filterMinPrice" type="number" min="0" step="50" />
            </div>
            <div class="form-group">
              <label>Max price ($)</label>
              <input id="filterMaxPrice" type="number" min="0" step="50" />
            </div>
            <div class="form-group">
              <label>Bedrooms</label>
              <select id="filterBeds">
                <option value="">Any</option>
                <option value="1">1+</option>
                <option value="2">2+</option>
                <option value="3">3+</option>
                <option value="4">4+</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Keyword (optional)</label>
            <input
              id="filterKeyword"
              placeholder="e.g., 'accessible', 'downtown', 'laundry'"
            />
          </div>

          <div style="display:flex; gap:0.5rem; margin-top:0.5rem;">
            <button id="applyFilters" class="btn btn-primary">Apply filters</button>
            <button id="showFavorites" class="btn btn-outline">
              Show favorites
            </button>
          </div>
        </div>

        <div id="map" style="height: 350px; border-radius:12px; margin-bottom:1.5rem;"></div>

        <div id="tenantProperties" class="card-grid"></div>
      </section>
    </main>

    <footer class="civic-footer">
      <div class="footer-grid">
        <div>
          <h4>Housing Choice Connect</h4>
          <p>A service of the Housing Authority.</p>
          <p>123 Housing Way, New Orleans, LA 70112</p>
          <p>üìû (504) 555‚Äë1212</p>
        </div>

        <div>
          <h4>Programs</h4>
          <a href="#">Housing Choice Voucher</a><br />
          <a href="#">Public Housing</a><br />
          <a href="#">Landlord Participation</a>
        </div>

        <div>
          <h4>Resources</h4>
          <a href="#">Fair Housing</a><br />
          <a href="#">ADA Accessibility</a><br />
          <a href="#">Language Assistance</a>
        </div>

        <div>
          <h4>Compliance</h4>
          <p>Equal Housing Opportunity</p>
          <p>ADA Accessible</p>
          <p>¬© <span id="year"></span> Housing Authority</p>
        </div>
      </div>
      <script>
        document.getElementById("year").textContent = new Date().getFullYear();
      </script>
    </footer>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
      requireRole("tenant");
      attachLogout("logoutBtn");
      initMap();
      renderTenantProperties("tenantProperties");

      document
        .getElementById("applyFilters")
        .addEventListener("click", applyTenantFilters);

      document.getElementById("showFavorites").addEventListener("click", () => {
        const favs = getFavorites();
        const all = getProperties();
        const filtered = all.filter((p) => favs.includes(p.id));
        renderTenantProperties("tenantProperties", filtered);
      });
    </script>
  </body>
</html>
